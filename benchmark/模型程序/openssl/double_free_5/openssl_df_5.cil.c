/* Generated by CIL v. 1.7.3 */
/* print_CIL_Input is true */

#line 216 "/usr/lib/gcc/x86_64-linux-gnu/5/include/stddef.h"
typedef unsigned long size_t;
#line 310 "../openssl.h"
struct bio_st;
#line 310 "../openssl.h"
typedef struct bio_st BIO;
#line 372
struct conf_st;
#line 372 "../openssl.h"
typedef struct conf_st CONF;
#line 16 "openssl_df_5.c"
struct lhash_node_st;
#line 16 "openssl_df_5.c"
typedef struct lhash_node_st OPENSSL_LH_NODE;
#line 21
struct lhash_st;
#line 21 "openssl_df_5.c"
typedef struct lhash_st OPENSSL_LHASH;
#line 22 "openssl_df_5.c"
struct lhash_node_st {
   void *data ;
   struct lhash_node_st *next ;
   unsigned long hash ;
};
#line 28 "openssl_df_5.c"
struct lhash_st {
   OPENSSL_LH_NODE **b ;
   int (*comp)(void const   * , void const   * ) ;
   unsigned long (*hash)(void const   * ) ;
   unsigned int num_nodes ;
   unsigned int num_alloc_nodes ;
   unsigned int p ;
   unsigned int pmax ;
   unsigned long up_load ;
   unsigned long down_load ;
   unsigned long num_items ;
   unsigned long num_expands ;
   unsigned long num_expand_reallocs ;
   unsigned long num_contracts ;
   unsigned long num_contract_reallocs ;
   unsigned long num_hash_calls ;
   unsigned long num_comp_calls ;
   unsigned long num_insert ;
   unsigned long num_replace ;
   unsigned long num_delete ;
   unsigned long num_no_delete ;
   unsigned long num_retrieve ;
   unsigned long num_retrieve_miss ;
   unsigned long num_hash_comps ;
   int error ;
};
#line 55 "openssl_df_5.c"
struct __anonstruct_CONF_VALUE_27 {
   char *section ;
   char *name ;
   char *value ;
};
#line 55 "openssl_df_5.c"
typedef struct __anonstruct_CONF_VALUE_27 CONF_VALUE;
#line 61 "openssl_df_5.c"
union lh_CONF_VALUE_dummy {
   void *d1 ;
   unsigned long d2 ;
   int d3 ;
};
#line 61 "openssl_df_5.c"
struct lhash_st_CONF_VALUE {
   union lh_CONF_VALUE_dummy dummy ;
};
#line 63 "openssl_df_5.c"
struct conf_method_st {
   char const   *name ;
   void *(*create)(struct conf_method_st *meth ) ;
   int (*init)(CONF *conf ) ;
   int (*destroy)(CONF *conf ) ;
   int (*destroy_data)(CONF *conf ) ;
   int (*load_bio)(CONF *conf , BIO *bp , long *eline ) ;
   int (*dump)(CONF const   *conf , BIO *bp ) ;
   int (*is_number)(CONF const   *conf , char c ) ;
   int (*to_int)(CONF const   *conf , char c ) ;
   int (*load)(CONF *conf , char const   *name , long *eline ) ;
};
#line 63 "openssl_df_5.c"
typedef struct conf_method_st CONF_METHOD;
#line 76 "openssl_df_5.c"
struct conf_st {
   CONF_METHOD *meth ;
   void *meth_data ;
   struct lhash_st_CONF_VALUE *data ;
};
#line 145
struct stack_st_CONF_VALUE;
#line 466 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) void *( __attribute__((__leaf__)) malloc)(size_t __size )  __attribute__((__malloc__)) ;
#line 82 "openssl_df_5.c"
static OPENSSL_LH_NODE **getrn(OPENSSL_LHASH *lh , void const   *data , unsigned long *rhash ) 
{ 
  OPENSSL_LH_NODE **ret ;
  OPENSSL_LH_NODE *n1 ;
  unsigned long hash ;
  unsigned long nn ;
  int (*cf)(void const   * , void const   * ) ;
  int tmp ;

  {
#line 89
  hash = (*(lh->hash))(data);
#line 90
  (lh->num_hash_calls) ++;
#line 91
  *rhash = hash;
#line 93
  nn = hash % (unsigned long )lh->pmax;
#line 94
  if (nn < (unsigned long )lh->p) {
#line 95
    nn = hash % (unsigned long )lh->num_alloc_nodes;
  }
#line 97
  cf = lh->comp;
#line 98
  ret = lh->b + (int )nn;
#line 99
  n1 = *ret;
#line 99
  while ((unsigned long )n1 != (unsigned long )((void *)0)) {
#line 100
    (lh->num_hash_comps) ++;
#line 101
    if (n1->hash != hash) {
#line 102
      ret = & n1->next;
#line 103
      goto __Cont;
    }
#line 105
    (lh->num_comp_calls) ++;
#line 106
    tmp = (*cf)((void const   *)n1->data, data);
#line 106
    if (tmp == 0) {
#line 107
      break;
    }
#line 108
    ret = & n1->next;
    __Cont: /* CIL Label */ 
#line 99
    n1 = n1->next;
  }
#line 110
  return (ret);
}
}
#line 113 "openssl_df_5.c"
CONF_VALUE *lh_CONF_VALUE_retrieve(OPENSSL_LHASH *lh , void const   *data ) 
{ 
  unsigned long hash ;
  OPENSSL_LH_NODE **rn ;
  void *ret ;

  {
#line 119
  lh->error = 0;
#line 120
  rn = getrn(lh, data, & hash);
#line 122
  if ((unsigned long )*rn == (unsigned long )((void *)0)) {
#line 123
    (lh->num_retrieve_miss) ++;
#line 124
    return ((CONF_VALUE *)((void *)0));
  } else {
#line 126
    ret = (*rn)->data;
#line 127
    (lh->num_retrieve) ++;
  }
#line 129
  return ((CONF_VALUE *)ret);
}
}
#line 132 "openssl_df_5.c"
CONF_VALUE *_CONF_get_section(CONF const   *conf , char const   *section ) 
{ 
  CONF_VALUE *v ;
  CONF_VALUE vv ;

  {
#line 136
  if ((unsigned long )conf == (unsigned long )((void *)0)) {
#line 137
    return ((CONF_VALUE *)((void *)0));
  } else
#line 136
  if ((unsigned long )section == (unsigned long )((void *)0)) {
#line 137
    return ((CONF_VALUE *)((void *)0));
  }
#line 138
  vv.name = (char *)((void *)0);
#line 139
  vv.section = (char *)section;
#line 140
  v = lh_CONF_VALUE_retrieve((OPENSSL_LHASH *)conf->data, (void const   *)(& vv));
#line 141
  return (v);
}
}
#line 145 "openssl_df_5.c"
struct stack_st_CONF_VALUE *_CONF_get_section_values(CONF const   *conf , char const   *section ) 
{ 
  CONF_VALUE *v ;

  {
#line 150
  v = _CONF_get_section(conf, section);
#line 151
  if ((unsigned long )v != (unsigned long )((void *)0)) {
#line 152
    return ((struct stack_st_CONF_VALUE *)v->value);
  } else {
#line 154
    return ((struct stack_st_CONF_VALUE *)((void *)0));
  }
}
}
#line 158 "openssl_df_5.c"
struct stack_st_CONF_VALUE *CONF_get_section(CONF const   *conf , char const   *section ) 
{ 
  struct stack_st_CONF_VALUE *tmp ;

  {
#line 160
  if ((unsigned long )conf == (unsigned long )((void *)0)) {
#line 161
    return ((struct stack_st_CONF_VALUE *)((void *)0));
  }
#line 164
  if ((unsigned long )section == (unsigned long )((void *)0)) {
#line 165
    return ((struct stack_st_CONF_VALUE *)((void *)0));
  }
#line 168
  tmp = _CONF_get_section_values(conf, section);
#line 168
  return (tmp);
}
}
#line 171 "openssl_df_5.c"
CONF_VALUE *lh_CONF_VALUE_new(void) 
{ 
  CONF_VALUE *ret ;
  void *tmp ;

  {
#line 174
  tmp = malloc(sizeof(*ret));
#line 174
  ret = (CONF_VALUE *)tmp;
#line 174
  if ((unsigned long )ret == (unsigned long )((void *)0)) {
#line 175
    return ((CONF_VALUE *)((void *)0));
  }
#line 176
  return (ret);
}
}
#line 179 "openssl_df_5.c"
int _CONF_new_data(CONF *conf ) 
{ 
  CONF_VALUE *tmp ;

  {
#line 181
  if ((unsigned long )conf == (unsigned long )((void *)0)) {
#line 182
    return (0);
  }
#line 184
  if ((unsigned long )conf->data == (unsigned long )((void *)0)) {
#line 185
    tmp = lh_CONF_VALUE_new();
#line 185
    conf->data = (struct lhash_st_CONF_VALUE *)tmp;
#line 186
    if ((unsigned long )conf->data == (unsigned long )((void *)0)) {
#line 187
      return (0);
    }
  }
#line 189
  return (1);
}
}
#line 192 "openssl_df_5.c"
int NCONF_load_bio(CONF *conf , BIO *bp , long *eline ) 
{ 
  int tmp ;

  {
#line 194
  if ((unsigned long )conf == (unsigned long )((void *)0)) {
#line 195
    return (0);
  }
#line 198
  tmp = _CONF_new_data(conf);
#line 198
  if (tmp == 0) {
#line 199
    return (0);
  }
#line 201
  return (1);
}
}
#line 210
extern int ( /* missing proto */  CONF_set_nconf)() ;
#line 204 "openssl_df_5.c"
struct lhash_st_CONF_VALUE *CONF_load_bio(struct lhash_st_CONF_VALUE *conf , BIO *bp ,
                                          long *eline ) 
{ 
  CONF ctmp ;
  int ret ;

  {
#line 210
  CONF_set_nconf(& ctmp, conf);
#line 212
  ret = NCONF_load_bio(& ctmp, bp, eline);
#line 213
  if (ret) {
#line 214
    return (ctmp.data);
  }
#line 215
  return ((struct lhash_st_CONF_VALUE *)((void *)0));
}
}
#line 224
extern int ( /* missing proto */  BIO_new_file)() ;
#line 230
extern int ( /* missing proto */  BIO_free)() ;
#line 218 "openssl_df_5.c"
struct lhash_st_CONF_VALUE *CONF_load(struct lhash_st_CONF_VALUE *conf , char const   *file ,
                                      long *eline ) 
{ 
  struct lhash_st_CONF_VALUE *ltmp ;
  BIO *in ;
  int tmp ;

  {
#line 222
  in = (BIO *)((void *)0);
#line 224
  tmp = BIO_new_file(file, "r");
#line 224
  in = (BIO *)tmp;
#line 225
  if ((unsigned long )in == (unsigned long )((void *)0)) {
#line 226
    return ((struct lhash_st_CONF_VALUE *)((void *)0));
  }
#line 229
  ltmp = CONF_load_bio(conf, in, eline);
#line 230
  BIO_free(in);
#line 232
  return (ltmp);
}
}
#line 258
extern int ( /* missing proto */  CONF_free)() ;
#line 257
extern int ( /* missing proto */  sk_CONF_VALUE_num)() ;
#line 270
extern int ( /* missing proto */  sk_CONF_VALUE_value)() ;
#line 283
extern int ( /* missing proto */  X509_NAME_add_entry_by_NID)() ;
#line 234 "openssl_df_5.c"
static int certify_spkac(char const   *infile , unsigned long chtype ) 
{ 
  struct stack_st_CONF_VALUE *sk ;
  struct lhash_st_CONF_VALUE *parms ;
  CONF_VALUE *cv ;
  char *type ;
  char *buf ;
  void *n ;
  void *ne ;
  int ok ;
  int i ;
  long errline ;
  int nid ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;

  {
#line 236
  sk = (struct stack_st_CONF_VALUE *)((void *)0);
#line 237
  parms = (struct lhash_st_CONF_VALUE *)((void *)0);
#line 238
  cv = (CONF_VALUE *)((void *)0);
#line 240
  n = (void *)0;
#line 241
  ne = (void *)0;
#line 242
  ok = -1;
#line 251
  parms = CONF_load((struct lhash_st_CONF_VALUE *)((void *)0), infile, & errline);
#line 252
  if ((unsigned long )parms == (unsigned long )((void *)0)) {
#line 253
    goto end;
  }
#line 256
  sk = CONF_get_section((CONF const   *)parms, "default");
#line 257
  tmp = sk_CONF_VALUE_num(sk);
#line 257
  if (tmp == 0) {
#line 258
    CONF_free(parms);
#line 259
    goto end;
  }
#line 266
  i = 0;
#line 266
  while (1) {
#line 267
    tmp___0 = sk_CONF_VALUE_num(sk);
#line 267
    if (tmp___0 <= i) {
#line 268
      break;
    }
#line 270
    tmp___1 = sk_CONF_VALUE_value(sk, i);
#line 270
    cv = (CONF_VALUE *)tmp___1;
#line 271
    type = cv->name;
#line 275
    buf = cv->name;
#line 275
    while (*buf) {
#line 276
      if ((int )*buf == 58) {
#line 276
        goto _L;
      } else
#line 276
      if ((int )*buf == 44) {
#line 276
        goto _L;
      } else
#line 276
      if ((int )*buf == 46) {
        _L: /* CIL Label */ 
#line 277
        buf ++;
#line 278
        if (*buf) {
#line 279
          type = buf;
        }
#line 280
        break;
      }
#line 275
      buf ++;
    }
#line 283
    tmp___2 = X509_NAME_add_entry_by_NID(n, nid, chtype, (unsigned char *)buf, -1,
                                         -1, 0);
#line 283
    if (! tmp___2) {
#line 285
      goto end;
    }
#line 266
    i ++;
  }
  end: 
#line 289
  CONF_free(parms);
#line 290
  return (ok);
}
}
#line 293 "openssl_df_5.c"
int main(int argc , char **argv ) 
{ 


  {
#line 295
  certify_spkac((char const   *)*(argv + 0), (unsigned long )argc);
#line 296
  return (0);
}
}
